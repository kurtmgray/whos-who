<a routerLink="/">Home</a>
<hr>

<div *ngIf="questions.length">
    <div class="questionNumber">Question {{ currentQuestionIndex + 1 }} of {{ questions.length }}</div>
    <div class="score">Score: {{ score }} </div>
    <div class="guesses-wrong: ">Incorrect guesses: {{ incorrectGuesses }} / {{ getMaxIncorrectGuesses() }}</div>




    <h2>{{ questions[currentQuestionIndex].text }}</h2>

    <ng-container *ngFor="let sample of questions[currentQuestionIndex]?.preview | slice:0:numberOfSamples">
        <audio #audioControls controls (play)="onPlay($event)">
        <source [src]="sample" type="audio/mpeg">
            Your browser does not support the audio tag.
        </audio>
    </ng-container>

    <div *ngFor="let option of questions[currentQuestionIndex].options" class="option">
        <img [src]="option.img" alt="picture of artist">
        <button (click)="selectAnswer(option.name)"> {{ option.name }}</button>
    </div>

    <p>Selected answer: {{ selectedAnswer }}</p>

    <div *ngIf="isAnswerSubmitted">
        <span *ngIf="isAnswerCorrect" class="correct-feedback">Correct!</span>
        <span *ngIf="!isAnswerCorrect" class="incorrect-feedback">Incorrect!</span>
    </div>

    <button (click)="submitAnswer()" [disabled]="isAnswerSubmitted">Submit Answer</button>

    <button (click)="currentQuestionIndex < questions.length - 1 ? nextQuestion() : finishQuiz()"
        [disabled]="!isAnswerSubmitted">
        {{ currentQuestionIndex < questions.length - 1 ? 'Next' : 'Finish Quiz' }} </button>


</div>

<app-results *ngIf="gameFinished" [results]="results" (closeResults)="handleResultsClosed()">
</app-results>